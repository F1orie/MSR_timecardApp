# テストデータ削除ガイド

テスト用に作成したユーザーや企業の削除方法について説明します。
「Supabase上で消しても内部的に残る」という現象は、**「Member List（プロフィール）」だけを消して「Auth Users（ログインID）」を消していない** 場合によく発生します。

## 正しい削除手順

### 1. ユーザーの削除（最優先）

ユーザーを完全に消すには、**Authentication（認証）** 側から削除する必要があります。

1. [Supabase Dashboard](https://supabase.com/dashboard) を開きます。
2. 左メニューの **Authentication** > **Users** をクリックします。
3. 削除したいユーザー（メールアドレス）を探します。
4. 右側の「...」メニューから **Delete user** を選択して削除します。

**これを行うと、関連するデータ（プロフィール、勤怠、申請など）はすべて自動的に消えます。**
※ 管理画面の「Member List」から削除する必要はありません。

### 2. 企業の削除

ユーザーがいなくなったら、企業（部署）を削除できます。

1. 左メニューの **Table Editor** > **departments** テーブルを開きます。
2. 削除したい企業の行にチェックを入れます。
3. **Delete x rows** をクリックして削除します。

※ 所属メンバーが残っているとエラーになります。必ず先にメンバー全員を削除してください。

---

## SQLで削除したい場合

もしSQLで一括削除したい場合は、同梱の `management/cleanup_data.sql` を参考にしてください。
ただし、`auth.users` テーブルへのアクセス権限の関係で、SQL Editorから削除できない場合があります。その場合は上記の手順1（ダッシュボードからの削除）を行ってください。
